<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-100%, initial-scale=1"/>
    <title>Title</title>
    <link rel="StyleSheet" href="../reset.css">
    <link rel="StyleSheet" href="kill1.css">
    <link rel="stylesheet" media="screen and (max-width:400px)" href="400.css">
    <script src="//cdn.bootcss.com/jquery/3.2.0/jquery.min.js"></script>
</head>
<body>
<header>
    <button class="menu"></button>
    <p>杀手杀人</p>
    <button class="clos"></button>
</header>
<div class="placeholder"></div>
<div class="main">

</div>
<footer>
    <button id="kill" onclick="tes()">杀死</button>
</footer>
<script>
    var job = JSON.parse(sessionStorage.getItem("job"));
    var info = document.getElementsByClassName("info");
    var n = 0;
    for (i = 0;i<job.length;i++){
        if(job[i]=="people"){
            n++;
            $(".main").append("<div class='box'><div tabindex='0' class='info'><h3>水民</h3><p></p></div></div>");
            $("p:last").text(n+"号")
        }
        else if(job[i]!="people"){
            n++;
            $(".main").append("<div class='box'><div tabindex='0' class='info'><h3>幽灵</h3><p></p></div></div>");
            $("p:last").text(n+"号")
        }
    }
    function switches(){
        var e = {
            state:"live",
            trans:function(){
                switch(this.state){
                    case"live":
                        this.state="death";
                        break;
                    default:
                        this.state="live";
                        break;
                }
            },
            event:function(){this.trans()}
        };
        return e;
    }
    for (i=0;i<job.length;i++){
        info[i] = new switches();
        //        alert(info[i]);
        //        function tes(){
        //            info[i].trans();
        //            if(info[i].state="live"){info[i].style.border="5px solid black";}
        //            else{info[i].style.border="5px solid blue";}
        //        }
    }
    //    $("#kill").on("click",function tes(){
    //        info[0].trans();
    //        if(info[0].state=="live"){$(":focus").css({"border":"5px solid green"})}
    //        else{info[0].css({"border":"5px solid orange"})}

    $(".info").on("click",function(){
        //        this是dom节点，不是jq对象
        var num = parseInt($(this).index());
        console.log(num);
        console.log(job[num]);

        if (info[num].h3 != "幽灵"){
            $(".info").attr("style","border-color:#fff");
            this.setAttribute("style","border-color:red");
        }
        else if (info[num]>h3.text() == "幽灵"){
            alert("自己人，别动手")
        }
    });



    function blink(){
        top.location="first.html"
    }
    sessionStorage.setItem("job",JSON.stringify(job));
</script>
</body>
</html>