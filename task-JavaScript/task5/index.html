<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-100%, initial-scale=1"/>
    <link rel="StyleSheet" href="../../task-CSS/reset.css">
    <link rel="StyleSheet" href="login.css">
    <title>欢迎来到喝我水</title>
    <script src="//cdn.bootcss.com/jquery/3.2.0/jquery.min.js"></script>

</head>
<body>
<div class="login">
    <p class="title">喝我水站后台登录</p>
    <label>
        <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-yonghu"></use>
        </svg>
        <input type="text" placeholder="用户名"> </label>
    <p class="tip">&nbsp;</p>
    <label>

    <svg class="icon" aria-hidden="true">
        <use xlink:href="#icon-suo"></use>
    </svg>
    <input type="password" placeholder="密码"> </label>
    <p class="tip">&nbsp;</p>
    <span></span>
    <button id="login">登录</button>
    <button id="go">go</button>

</div>
<script src="//at.alicdn.com/t/font_b8jpyzie9gujtt9.js"></script>
<script>
//        var xhr;
//        if (window.XMLHttpRequest){
//            xhr = new XMLHttpRequest();
//        }else{
//            xhr = new ActiveXObject('Microsoft.XMLHTTP');
//        }
//        var btn = document.getElementById("login");
//        var sp = document.getElementsByTagName("span")[0];
////        var na = document.getElementsByTagName("input")[0].value;
////        var pw = document.getElementsByTagName("input")[1].value;
//    //    var data = encodeFormData;
//    //    encodeFormData = {name:na,pwd:pw};
//        btn.onclick = function(){
//    //        创建xhr对象
//            var xhr = new XMLHttpRequest();
//    //        异步接受响应
//            xhr.onreadystatechage = function(){
//                if(xhr.readyState == 4){
//                    if(xhr.status == 200){
//                        sp.innerHTML += xhr.responseText;
//                    }
//                }
//            };
//            xhr.open("POST","/carrots-admin-ajax/a/login");
//            xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');
//            xhr.send(name=na,pwd=pw);
//            if((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304){
//                alert(xhr.responseText);
//            } else {
//                alert('请求失败:' + xhr.status);
//            }
//        };
//        $("#login").on("click", function(){
//            console.log($("input:first").val());
//            console.log($("input:last").val())
//        });

//写着玩
$('#go').click(function(){
   console.log(document.cookie.split(";")[1].split("=")[1]);
    $.post('/carrots-admin-ajax/a/logout',{},function(){
        alert('退出成功！')
    })
});

//  qq号验证     /[1-9][0-9]{4,14}/

var regP = /^\d{6,16}$/;
var regU = /^([A-Za-z0-9\S]){5,16}$/;
//验证账号
$("input:first").blur(function(){
    var user = $("input:first").val();
    if (regU.test(user) == true ){
        $("p:eq(1)").html("输入正确")
    }else{
        $("p:eq(1)").html("请输入正确的用户名")
    }
});
//验证密码
$("input:last").blur(function(){
    var pass = $("input:last").val();
    if (regP.test(pass) == true ){
        $("p:eq(2)").html("输入正确")
    }else{
        $("p:eq(2)").html("请输入正确的密码")
    }
});
//    $("input:first").on("blur",function(){
//        na = $("input:first").val();
//        console.log(na)
//    });
//    $("input:last").on("blur",function(){
//        pw = $("input:last").val();
//        console.log(pw)
//    });
//    $().ready(function(){
        $("#login").click(function(){
            var na = $("input:first").val();
            var pw = $("input:last").val();
            $.post('/carrots-admin-ajax/a/login', {
                name : na,
                pwd : pw
            },function(data,textStatus){
                $("span").html(data.message);
            },'json');
    });
    $(".login").keydown(function(){
        if(event.keyCode==13){
            $("#login").click()
        }
    });




// 只能输入数字：
var rega = /^[0-9]*$/;
// 只能输入n位的数字：
var regb = /^\d{5}$/;
// 只能输入至少n位的数字：
var regc = /^\d{5,}$/;
// 只能输入m~n位的数字：
var regd = /^\d{5,7}$/;
// 只能输入零和非零开头的数字：
var rege = /^(0|[1-9][0-9]*)$/;
// 只能输入有两位小数的正实数：
var regf = /^[0-9]+(.[0-9]{2})?$"/;
// 只能输入有1~3位小数的正实数：
var regg = /^[0-9]+(.[0-9]{1,3})?$/;
// 只能输入非零的正整数：
var regh = /^\+?[1-9][0-9]*$/;
// 只能输入非零的负整数：
var regi = /^\-[1-9][]0-9"*$/;
// 只能输入长度为3的字符：
var regj = /^.{3}$/;
// 只能输入由26个英文字母组成的字符串：
var regk = /^[A-Za-z]+$/;
// 只能输入由26个大写英文字母组成的字符串：
var regl = /^[A-Z]+$/;
// 只能输入由26个小写英文字母组成的字符串：
var regm = /^[a-z]+$/;
// 只能输入由数字和26个英文字母组成的字符串：
var regn = /^[A-Za-z0-9]+$/;
// 只能输入由数字、26个英文字母或者下划线组成的字符串：
var rego = /^\w+$/;
// 验证用户密码：
var regq = /^[a-zA-Z]\w{5,17}$/;
// 正确格式为：以字母开头，长度在6~18之间，只能包含字符、数字和下划线
</script>
</body>
</html>